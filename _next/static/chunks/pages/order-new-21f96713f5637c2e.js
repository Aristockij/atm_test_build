(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{6808:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order-new",function(){return n(5333)}])},228:function(e,r,n){"use strict";n.d(r,{K:function(){return t}});var o=n(5893);n(7294);var _=n(6781);let t=e=>{let{color:r=_.r.WHITE,...n}=e;return(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...n,children:(0,o.jsx)("path",{d:"M13.0718 19C4.87188 19 0.194878 13.7447 0 5H4.10743C4.24235 11.4184 7.27038 14.1371 9.66888 14.6977V5H13.5366V10.5355C15.9051 10.2973 18.3933 7.77477 19.2328 5H23.1004C22.4558 8.41942 19.7575 10.9419 17.8387 11.979C19.7575 12.8198 22.8307 15.02 24 19H19.7425C18.8281 16.3373 16.5497 14.2773 13.5366 13.997V19H13.0718Z",fill:r})})}},2678:function(e,r,n){"use strict";n.d(r,{CT:function(){return o},kO:function(){return i},lP:function(){return _},sX:function(){return t}});let o=200,_=400,t=3,i=333.5},5333:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSG:function(){return N}});var o=n(5893),_=n(7294),t=n(878),i=n.n(t),a=n(3697),d=n(317),s=n(3845),l=n(6673),c=n(3719),u=n(2344),w=n(8476),m=n(3577),f=n(153),h=n(1163),T=n(3273),p=n(2678),x=n(228),g=n(8385),I=n(9574),E=n(3282),O=n(386),S=n(9477),N=!0;r.default=e=>{let{localization:r}=e,n=r.ORDER_NEW,[t,N]=(0,m.Iq)(),[B,j]=(0,_.useState)(),v=t.couponInfo,[k,R]=(0,_.useState)(v.coupon),y=(0,h.useRouter)(),C=t.userData||{},b=t.carCategories,L=t.userOrders,A=L.length>=p.sX,[M,H]=(0,_.useState)(!1),U=(0,_.useMemo)(()=>b[0]||{},[b]),P=async()=>{try{let e=(await (0,f.C)()).data;(0,m.jT)(N,e.results)}catch(e){console.log(e)}},G=async()=>{try{let e=(await (0,w.nQ)()).data;(0,m.ap)(N,e.results)}catch(e){console.log(e)}},Z=async()=>{if(A)(0,m.Q1)(N,{visibility:!0,props:{title:n.ERROR_LIMIT_TITLE,message:n.ERROR_LIMIT_MESSAGE,buttonText:n.ERROR_LIMIT_BUTTON,content:(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("button",{onClick:D,className:i()["order-new__share"],children:[(0,o.jsx)(x.K,{className:i()["order-new__share-vk"]}),n.SHARE_BUTTON]})})}});else if(!M){H(!0);let e={car_category:U.id};k&&(e.coupon_code=k),(0,w.$W)(e).then(e=>{let r=parseInt(e.data.order.price);if(r>0){let r=e.data.order.payment_url;window.open(r,"_self")}else(0,m.Dc)(N,{title:n.SUCCESS_TITLE,text:n.SUCCESS_MESSAGE,button:n.SUCCESS_BUTTON,route:I.l.ROOT}),y.push(I.l.SUCCESS)}).catch(e=>{(0,m.Ar)(N,{visibility:!0,props:{title:n.ERROR_TITLE,message:(0,T.kt)(e.response)||n.ERROR_MESSAGE,buttonText:n.ERROR_BUTTON}})}).finally(()=>{H(!1)})}};function D(){(0,E.ZP)("reachGoal",O.l.BUTTON_SHARE);let e=document.querySelector("#vk_share_btn a");e.click()}return(0,_.useEffect)(()=>{P(),G();let e=document.getElementById("vk_share_btn");console.log(e),e&&(console.log(e),e.innerHTML=window.VK.Share.button({url:"https://order.atom.auto",title:"Я забронировал АТОМ",image:"https://order.atom.auto/vk_share.png"}))},[]),(0,o.jsx)(s.Z,{localization:r,children:(0,o.jsxs)("div",{className:i()["order-new"],children:[(0,o.jsx)(c.Z,{localization:r,withBurger:!1,withLogin:!1,withUser:!0}),(0,o.jsxs)("main",{className:i()["order-new__main"],children:[(0,o.jsx)(a.Z,{t:n}),(0,o.jsxs)("section",{className:i()["order-new__form-section"],children:[(0,o.jsxs)("div",{className:i()["order-new__form-main"],children:[(0,o.jsx)("div",{className:i()["order-new__price-label"],children:n.PRICE_LABEL}),(0,o.jsx)(g.Z,{onSuccess:(e,r)=>{R(r)},price:parseInt(U.price),localization:r,theme:g.B.LIGHT}),(0,o.jsxs)("div",{className:i()["order-new__form-info"],children:[(0,o.jsxs)("div",{className:i()["order-new__user-info"],children:[(0,o.jsx)("p",{children:C.first_name}),(0,o.jsx)("p",{children:C.phone_number}),(0,o.jsx)("p",{children:C.email})]}),!A&&(0,o.jsx)("div",{className:i()["order-new__limit-info"],children:(0,u.tj)(n.LIMIT_HINT,{limit:L.length+1})})]})]}),(0,o.jsx)("div",{className:i()["order-new__hint"],dangerouslySetInnerHTML:{__html:n.HINT}}),(0,o.jsx)(S.Z,{onClick:e=>{j(!B)},localization:r,active:B}),(0,o.jsx)(l.Z,{text:n.SUBMIT_BUTTON,className:i()["order-new__submit"],onClick:()=>{Z()},disabled:!B}),(0,o.jsx)("div",{style:{display:"none"},id:"vk_share_btn"})]})]}),(0,o.jsx)("footer",{className:i()["order-new__footer"],children:(0,o.jsx)(d.Z,{badges:r.COMMON.ORDER_CONDITIONS})})]})})}},878:function(e){e.exports={carousel:"order-new_carousel___pewk","control-dots":"order-new_control-dots__Le6PF","order-new":"order-new_order-new__MmkRF","order-new__main":"order-new_order-new__main__RCxbj","order-new__form-section":"order-new_order-new__form-section__VUl8x","order-new__form-main":"order-new_order-new__form-main__eAGm8","order-new__price-label":"order-new_order-new__price-label__yZbEZ","order-new__price":"order-new_order-new__price__Jd9BN","order-new__form-info":"order-new_order-new__form-info__1idTX","order-new__user-info":"order-new_order-new__user-info__GosVC","order-new__limit-info":"order-new_order-new__limit-info__R9_sv","order-new__links":"order-new_order-new__links__zI1ZA","order-new__hint":"order-new_order-new__hint__1vjfs","order-new__submit":"order-new_order-new__submit__TyNiy","order-new__footer":"order-new_order-new__footer__fGeVJ","order-new__share":"order-new_order-new__share__NeGDX","order-new__share-vk":"order-new_order-new__share-vk__r_Q3h",runningLine:"order-new_runningLine__WhHGE",runningLineSecondary:"order-new_runningLineSecondary__qqooz",fadeInAnimation:"order-new_fadeInAnimation__KPvP6",fadeOutAnimation:"order-new_fadeOutAnimation__2_9US",wavy:"order-new_wavy__mFwYm","wavy-reversed":"order-new_wavy-reversed__WDcj_",figureIncrease:"order-new_figureIncrease__86968",carPropertyAnimation:"order-new_carPropertyAnimation__YRXH_",carPropertyAnimationOut:"order-new_carPropertyAnimationOut__iW4uI",largeBookButtonText:"order-new_largeBookButtonText__7r4Vg",largeBookButtonTextMedium:"order-new_largeBookButtonTextMedium__Ug95n",largeBookButtonTextOut:"order-new_largeBookButtonTextOut__62O9i",largeBookButtonIcon:"order-new_largeBookButtonIcon__QYctD",largeBookButtonIconOut:"order-new_largeBookButtonIconOut__Og7g2",detailItemFadeout:"order-new_detailItemFadeout__TabmP",detailTitle:"order-new_detailTitle__yr9tY",detailTitleOut:"order-new_detailTitleOut__Pourq",pulse:"order-new_pulse__udGjc",textShine:"order-new_textShine__5uLGp"}}},function(e){e.O(0,[664,762,135,501,774,888,179],function(){return e(e.s=6808)}),_N_E=e.O()}]);